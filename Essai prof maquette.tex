% !TEX program = lualatex
\documentclass[11pt,a5paper]{article}

% -------- LuaLaTeX : polices et langue --------
\usepackage{fontspec}
\setmainfont{Latin Modern Roman}
\setsansfont{Tex Gyre Heros}
\usepackage{polyglossia}
\setdefaultlanguage{french}

% -------- Mise en page --------
\usepackage[a4paper,margin=2cm]{geometry}
\usepackage{multicol}
\usepackage{fancyhdr}
\pagestyle{empty}

% -------- Mathématiques --------
\usepackage{amsmath,amssymb,mathtools}
\usepackage{siunitx}
\sisetup{locale=FR}

\usepackage{enumitem}
\usepackage{xcolor}


\usepackage{ProfCollege}
\usepackage{ProfMaquette}

% Définition d'une nouvelle liste "todolist"
\newlist{todolist}{itemize}{1}
\setlist[todolist]{label=$\square$}

% -------- Divers --------
\setlength{\parindent}{0pt}

% Générer la liste Lua dans une macro
\newcommand{\genEquations}{
\begin{itemize}
\directlua{
  % math.randomseed(os.time())
  math.randomseed(123)
  for i=1,6 do
    local a = math.random(2,7)
    local b = math.random(2,7)
    local c = math.random(2,7)
    local d = math.random(2,7)
    if a==c then a=a+1 end
    tex.sprint("\\item  $" .. a .. "x + " .. b .. " = " .. c .. "x + " .. d .. "$")
  end
}
\end{itemize}
}

\begin{document}

\begin{Maquette}[Fiche]{Niveau=3\textsuperscript{e}}

\begin{exercice}
Texte en \textcolor{red}{rouge}
\Patron[Pave,ListeCouleurs={%
Crimson,
!,% Pas de couleur pour la face 2.
LightGreen,
Crimson,
Orange,
LightGreen}]{%
phoo,
lhpo,
hopl,
pool
}
\end{exercice}

\begin{exercice}
\ArbreCalcul{2*(3+5)+(-7)}
\begin{enumerate}
    \item\brm{1} Développer et réduire :
    \[A=2x(3x+4)\]
    \item\brm{2} Factoriser :
    \[B=3s^2-12s\]
\end{enumerate}
\end{exercice}

\begin{exercice}
Résoudre les équations :
\genEquations
\end{exercice}
\end{Maquette}
\end{document}
